(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var Q,g,He,M,Ie,Re,Ue,We,he,ie,ce,W={},Ve=[],ot=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,X=Array.isArray;function A(e,t){for(var n in t)e[n]=t[n];return e}function me(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function rt(e,t,n){var r,o,s,c={};for(s in t)s=="key"?r=t[s]:s=="ref"?o=t[s]:c[s]=t[s];if(arguments.length>2&&(c.children=arguments.length>3?Q.call(arguments,2):n),typeof e=="function"&&e.defaultProps!=null)for(s in e.defaultProps)c[s]===void 0&&(c[s]=e.defaultProps[s]);return K(e,c,r,o,null)}function K(e,t,n,r,o){var s={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:o??++He,__i:-1,__u:0};return o==null&&g.vnode!=null&&g.vnode(s),s}function Y(e){return e.children}function q(e,t){this.props=e,this.context=t}function R(e,t){if(t==null)return e.__?R(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null)return n.__e;return typeof e.type=="function"?R(e):null}function Je(e){var t,n;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((n=e.__k[t])!=null&&n.__e!=null){e.__e=e.__c.base=n.__e;break}return Je(e)}}function De(e){(!e.__d&&(e.__d=!0)&&M.push(e)&&!Z.__r++||Ie!=g.debounceRendering)&&((Ie=g.debounceRendering)||Re)(Z)}function Z(){for(var e,t,n,r,o,s,c,l=1;M.length;)M.length>l&&M.sort(Ue),e=M.shift(),l=M.length,e.__d&&(n=void 0,o=(r=(t=e).__v).__e,s=[],c=[],t.__P&&((n=A({},r)).__v=r.__v+1,g.vnode&&g.vnode(n),ye(t.__P,n,r,t.__n,t.__P.namespaceURI,32&r.__u?[o]:null,s,o??R(r),!!(32&r.__u),c),n.__v=r.__v,n.__.__k[n.__i]=n,ze(s,n,c),n.__e!=o&&Je(n)));Z.__r=0}function Ke(e,t,n,r,o,s,c,l,u,_,p){var i,h,d,b,S,w,y,v=r&&r.__k||Ve,m=t.length;for(u=st(n,t,v,u,m),i=0;i<m;i++)(d=n.__k[i])!=null&&(h=d.__i==-1?W:v[d.__i]||W,d.__i=i,w=ye(e,d,h,o,s,c,l,u,_,p),b=d.__e,d.ref&&h.ref!=d.ref&&(h.ref&&ve(h.ref,null,d),p.push(d.ref,d.__c||b,d)),S==null&&b!=null&&(S=b),(y=!!(4&d.__u))||h.__k===d.__k?u=qe(d,u,e,y):typeof d.type=="function"&&w!==void 0?u=w:b&&(u=b.nextSibling),d.__u&=-7);return n.__e=S,u}function st(e,t,n,r,o){var s,c,l,u,_,p=n.length,i=p,h=0;for(e.__k=new Array(o),s=0;s<o;s++)(c=t[s])!=null&&typeof c!="boolean"&&typeof c!="function"?(u=s+h,(c=e.__k[s]=typeof c=="string"||typeof c=="number"||typeof c=="bigint"||c.constructor==String?K(null,c,null,null,null):X(c)?K(Y,{children:c},null,null,null):c.constructor==null&&c.__b>0?K(c.type,c.props,c.key,c.ref?c.ref:null,c.__v):c).__=e,c.__b=e.__b+1,l=null,(_=c.__i=it(c,n,u,i))!=-1&&(i--,(l=n[_])&&(l.__u|=2)),l==null||l.__v==null?(_==-1&&(o>p?h--:o<p&&h++),typeof c.type!="function"&&(c.__u|=4)):_!=u&&(_==u-1?h--:_==u+1?h++:(_>u?h--:h++,c.__u|=4))):e.__k[s]=null;if(i)for(s=0;s<p;s++)(l=n[s])!=null&&(2&l.__u)==0&&(l.__e==r&&(r=R(l)),Ge(l,l));return r}function qe(e,t,n,r){var o,s;if(typeof e.type=="function"){for(o=e.__k,s=0;o&&s<o.length;s++)o[s]&&(o[s].__=e,t=qe(o[s],t,n,r));return t}e.__e!=t&&(r&&(t&&e.type&&!t.parentNode&&(t=R(e)),n.insertBefore(e.__e,t||null)),t=e.__e);do t=t&&t.nextSibling;while(t!=null&&t.nodeType==8);return t}function it(e,t,n,r){var o,s,c,l=e.key,u=e.type,_=t[n],p=_!=null&&(2&_.__u)==0;if(_===null&&e.key==null||p&&l==_.key&&u==_.type)return n;if(r>(p?1:0)){for(o=n-1,s=n+1;o>=0||s<t.length;)if((_=t[c=o>=0?o--:s++])!=null&&(2&_.__u)==0&&l==_.key&&u==_.type)return c}return-1}function Se(e,t,n){t[0]=="-"?e.setProperty(t,n??""):e[t]=n==null?"":typeof n!="number"||ot.test(t)?n:n+"px"}function J(e,t,n,r,o){var s,c;e:if(t=="style")if(typeof n=="string")e.style.cssText=n;else{if(typeof r=="string"&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Se(e.style,t,"");if(n)for(t in n)r&&n[t]==r[t]||Se(e.style,t,n[t])}else if(t[0]=="o"&&t[1]=="n")s=t!=(t=t.replace(We,"$1")),c=t.toLowerCase(),t=c in e||t=="onFocusOut"||t=="onFocusIn"?c.slice(2):t.slice(2),e.l||(e.l={}),e.l[t+s]=n,n?r?n.u=r.u:(n.u=he,e.addEventListener(t,s?ce:ie,s)):e.removeEventListener(t,s?ce:ie,s);else{if(o=="http://www.w3.org/2000/svg")t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!="width"&&t!="height"&&t!="href"&&t!="list"&&t!="form"&&t!="tabIndex"&&t!="download"&&t!="rowSpan"&&t!="colSpan"&&t!="role"&&t!="popover"&&t in e)try{e[t]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&t[4]!="-"?e.removeAttribute(t):e.setAttribute(t,t=="popover"&&n==1?"":n))}}function Ce(e){return function(t){if(this.l){var n=this.l[t.type+e];if(t.t==null)t.t=he++;else if(t.t<n.u)return;return n(g.event?g.event(t):t)}}}function ye(e,t,n,r,o,s,c,l,u,_){var p,i,h,d,b,S,w,y,v,m,C,T,L,j,H,F,U,P=t.type;if(t.constructor!=null)return null;128&n.__u&&(u=!!(32&n.__u),s=[l=t.__e=n.__e]),(p=g.__b)&&p(t);e:if(typeof P=="function")try{if(y=t.props,v="prototype"in P&&P.prototype.render,m=(p=P.contextType)&&r[p.__c],C=p?m?m.props.value:p.__:r,n.__c?w=(i=t.__c=n.__c).__=i.__E:(v?t.__c=i=new P(y,C):(t.__c=i=new q(y,C),i.constructor=P,i.render=_t),m&&m.sub(i),i.props=y,i.state||(i.state={}),i.context=C,i.__n=r,h=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&P.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=A({},i.__s)),A(i.__s,P.getDerivedStateFromProps(y,i.__s))),d=i.props,b=i.state,i.__v=t,h)v&&P.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&P.getDerivedStateFromProps==null&&y!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(y,C),!i.__e&&i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(y,i.__s,C)===!1||t.__v==n.__v){for(t.__v!=n.__v&&(i.props=y,i.state=i.__s,i.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some(function(x){x&&(x.__=t)}),T=0;T<i._sb.length;T++)i.__h.push(i._sb[T]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(y,i.__s,C),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,S)})}if(i.context=C,i.props=y,i.__P=e,i.__e=!1,L=g.__r,j=0,v){for(i.state=i.__s,i.__d=!1,L&&L(t),p=i.render(i.props,i.state,i.context),H=0;H<i._sb.length;H++)i.__h.push(i._sb[H]);i._sb=[]}else do i.__d=!1,L&&L(t),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++j<25);i.state=i.__s,i.getChildContext!=null&&(r=A(A({},r),i.getChildContext())),v&&!h&&i.getSnapshotBeforeUpdate!=null&&(S=i.getSnapshotBeforeUpdate(d,b)),F=p,p!=null&&p.type===Y&&p.key==null&&(F=Ze(p.props.children)),l=Ke(e,X(F)?F:[F],t,n,r,o,s,c,l,u,_),i.base=t.__e,t.__u&=-161,i.__h.length&&c.push(i),w&&(i.__E=i.__=null)}catch(x){if(t.__v=null,u||s!=null)if(x.then){for(t.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;s[s.indexOf(l)]=null,t.__e=l}else{for(U=s.length;U--;)me(s[U]);_e(t)}else t.__e=n.__e,t.__k=n.__k,x.then||_e(t);g.__e(x,t,n)}else s==null&&t.__v==n.__v?(t.__k=n.__k,t.__e=n.__e):l=t.__e=ct(n.__e,t,n,r,o,s,c,u,_);return(p=g.diffed)&&p(t),128&t.__u?void 0:l}function _e(e){e&&e.__c&&(e.__c.__e=!0),e&&e.__k&&e.__k.forEach(_e)}function ze(e,t,n){for(var r=0;r<n.length;r++)ve(n[r],n[++r],n[++r]);g.__c&&g.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(s){s.call(o)})}catch(s){g.__e(s,o.__v)}})}function Ze(e){return typeof e!="object"||e==null||e.__b&&e.__b>0?e:X(e)?e.map(Ze):A({},e)}function ct(e,t,n,r,o,s,c,l,u){var _,p,i,h,d,b,S,w=n.props,y=t.props,v=t.type;if(v=="svg"?o="http://www.w3.org/2000/svg":v=="math"?o="http://www.w3.org/1998/Math/MathML":o||(o="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((d=s[_])&&"setAttribute"in d==!!v&&(v?d.localName==v:d.nodeType==3)){e=d,s[_]=null;break}}if(e==null){if(v==null)return document.createTextNode(y);e=document.createElementNS(o,v,y.is&&y),l&&(g.__m&&g.__m(t,s),l=!1),s=null}if(v==null)w===y||l&&e.data==y||(e.data=y);else{if(s=s&&Q.call(e.childNodes),w=n.props||W,!l&&s!=null)for(w={},_=0;_<e.attributes.length;_++)w[(d=e.attributes[_]).name]=d.value;for(_ in w)if(d=w[_],_!="children"){if(_=="dangerouslySetInnerHTML")i=d;else if(!(_ in y)){if(_=="value"&&"defaultValue"in y||_=="checked"&&"defaultChecked"in y)continue;J(e,_,null,d,o)}}for(_ in y)d=y[_],_=="children"?h=d:_=="dangerouslySetInnerHTML"?p=d:_=="value"?b=d:_=="checked"?S=d:l&&typeof d!="function"||w[_]===d||J(e,_,d,w[_],o);if(p)l||i&&(p.__html==i.__html||p.__html==e.innerHTML)||(e.innerHTML=p.__html),t.__k=[];else if(i&&(e.innerHTML=""),Ke(t.type=="template"?e.content:e,X(h)?h:[h],t,n,r,v=="foreignObject"?"http://www.w3.org/1999/xhtml":o,s,c,s?s[0]:n.__k&&R(n,0),l,u),s!=null)for(_=s.length;_--;)me(s[_]);l||(_="value",v=="progress"&&b==null?e.removeAttribute("value"):b!=null&&(b!==e[_]||v=="progress"&&!b||v=="option"&&b!=w[_])&&J(e,_,b,w[_],o),_="checked",S!=null&&S!=e[_]&&J(e,_,S,w[_],o))}return e}function ve(e,t,n){try{if(typeof e=="function"){var r=typeof e.__u=="function";r&&e.__u(),r&&t==null||(e.__u=e(t))}else e.current=t}catch(o){g.__e(o,n)}}function Ge(e,t,n){var r,o;if(g.unmount&&g.unmount(e),(r=e.ref)&&(r.current&&r.current!=e.__e||ve(r,null,t)),(r=e.__c)!=null){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(s){g.__e(s,t)}r.base=r.__P=null}if(r=e.__k)for(o=0;o<r.length;o++)r[o]&&Ge(r[o],t,n||typeof e.type!="function");n||me(e.__e),e.__c=e.__=e.__e=void 0}function _t(e,t,n){return this.constructor(e,n)}function at(e,t,n){var r,o,s,c;t==document&&(t=document.documentElement),g.__&&g.__(e,t),o=(r=!1)?null:t.__k,s=[],c=[],ye(t,e=t.__k=rt(Y,null,[e]),o||W,W,t.namespaceURI,o?null:t.firstChild?Q.call(t.childNodes):null,s,o?o.__e:t.firstChild,r,c),ze(s,e,c)}Q=Ve.slice,g={__e:function(e,t,n,r){for(var o,s,c;t=t.__;)if((o=t.__c)&&!o.__)try{if((s=o.constructor)&&s.getDerivedStateFromError!=null&&(o.setState(s.getDerivedStateFromError(e)),c=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,r||{}),c=o.__d),c)return o.__E=o}catch(l){e=l}throw e}},He=0,q.prototype.setState=function(e,t){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=A({},this.state),typeof e=="function"&&(e=e(A({},n),this.props)),e&&A(n,e),e!=null&&this.__v&&(t&&this._sb.push(t),De(this))},q.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),De(this))},q.prototype.render=Y,M=[],Re=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Ue=function(e,t){return e.__v.__b-t.__v.__b},Z.__r=0,We=/(PointerCapture)$|Capture$/i,he=0,ie=Ce(!1),ce=Ce(!0);var lt=0;function a(e,t,n,r,o,s){t||(t={});var c,l,u=t;if("ref"in u)for(l in u={},t)l=="ref"?c=t[l]:u[l]=t[l];var _={type:e,props:u,key:n,ref:c,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--lt,__i:-1,__u:0,__source:o,__self:s};if(typeof e=="function"&&(c=e.defaultProps))for(l in c)u[l]===void 0&&(u[l]=c[l]);return g.vnode&&g.vnode(_),_}var V,I,ne,Pe,G=0,Qe=[],D=g,Ee=D.__b,Te=D.__r,Ae=D.diffed,Le=D.__c,xe=D.unmount,Ne=D.__;function ge(e,t){D.__h&&D.__h(I,e,G||t),G=0;var n=I.__H||(I.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function k(e){return G=1,ut(Ye,e)}function ut(e,t,n){var r=ge(V++,2);if(r.t=e,!r.__c&&(r.__=[Ye(void 0,t),function(l){var u=r.__N?r.__N[0]:r.__[0],_=r.t(u,l);u!==_&&(r.__N=[_,r.__[1]],r.__c.setState({}))}],r.__c=I,!I.__f)){var o=function(l,u,_){if(!r.__c.__H)return!0;var p=r.__c.__H.__.filter(function(h){return!!h.__c});if(p.every(function(h){return!h.__N}))return!s||s.call(this,l,u,_);var i=r.__c.props!==l;return p.forEach(function(h){if(h.__N){var d=h.__[0];h.__=h.__N,h.__N=void 0,d!==h.__[0]&&(i=!0)}}),s&&s.call(this,l,u,_)||i};I.__f=!0;var s=I.shouldComponentUpdate,c=I.componentWillUpdate;I.componentWillUpdate=function(l,u,_){if(this.__e){var p=s;s=void 0,o(l,u,_),s=p}c&&c.call(this,l,u,_)},I.shouldComponentUpdate=o}return r.__N||r.__}function ee(e,t){var n=ge(V++,3);!D.__s&&Xe(n.__H,t)&&(n.__=e,n.u=t,I.__H.__h.push(n))}function dt(e){return G=5,ft(function(){return{current:e}},[])}function ft(e,t){var n=ge(V++,7);return Xe(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function pt(){for(var e;e=Qe.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(z),e.__H.__h.forEach(ae),e.__H.__h=[]}catch(t){e.__H.__h=[],D.__e(t,e.__v)}}D.__b=function(e){I=null,Ee&&Ee(e)},D.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),Ne&&Ne(e,t)},D.__r=function(e){Te&&Te(e),V=0;var t=(I=e.__c).__H;t&&(ne===I?(t.__h=[],I.__h=[],t.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(t.__h.forEach(z),t.__h.forEach(ae),t.__h=[],V=0)),ne=I},D.diffed=function(e){Ae&&Ae(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Qe.push(t)!==1&&Pe===D.requestAnimationFrame||((Pe=D.requestAnimationFrame)||ht)(pt)),t.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),ne=I=null},D.__c=function(e,t){t.some(function(n){try{n.__h.forEach(z),n.__h=n.__h.filter(function(r){return!r.__||ae(r)})}catch(r){t.some(function(o){o.__h&&(o.__h=[])}),t=[],D.__e(r,n.__v)}}),Le&&Le(e,t)},D.unmount=function(e){xe&&xe(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach(function(r){try{z(r)}catch(o){t=o}}),n.__H=void 0,t&&D.__e(t,n.__v))};var $e=typeof requestAnimationFrame=="function";function ht(e){var t,n=function(){clearTimeout(r),$e&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,35);$e&&(t=requestAnimationFrame(n))}function z(e){var t=I,n=e.__c;typeof n=="function"&&(e.__c=void 0,n()),I=t}function ae(e){var t=I;e.__c=e.__(),I=t}function Xe(e,t){return!e||e.length!==t.length||t.some(function(n,r){return n!==e[r]})}function Ye(e,t){return typeof t=="function"?t(e):t}const le=(e,t)=>t.some(n=>e instanceof n);let Be,je;function mt(){return Be||(Be=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yt(){return je||(je=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ue=new WeakMap,oe=new WeakMap,te=new WeakMap;function vt(e){const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("success",s),e.removeEventListener("error",c)},s=()=>{n(O(e.result)),o()},c=()=>{r(e.error),o()};e.addEventListener("success",s),e.addEventListener("error",c)});return te.set(t,e),t}function gt(e){if(ue.has(e))return;const t=new Promise((n,r)=>{const o=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",c),e.removeEventListener("abort",c)},s=()=>{n(),o()},c=()=>{r(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",s),e.addEventListener("error",c),e.addEventListener("abort",c)});ue.set(e,t)}let de={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return ue.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return O(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function et(e){de=e(de)}function bt(e){return yt().includes(e)?function(...t){return e.apply(fe(this),t),O(this.request)}:function(...t){return O(e.apply(fe(this),t))}}function wt(e){return typeof e=="function"?bt(e):(e instanceof IDBTransaction&&gt(e),le(e,mt())?new Proxy(e,de):e)}function O(e){if(e instanceof IDBRequest)return vt(e);if(oe.has(e))return oe.get(e);const t=wt(e);return t!==e&&(oe.set(e,t),te.set(t,e)),t}const fe=e=>te.get(e);function kt(e,t,{blocked:n,upgrade:r,blocking:o,terminated:s}={}){const c=indexedDB.open(e,t),l=O(c);return r&&c.addEventListener("upgradeneeded",u=>{r(O(c.result),u.oldVersion,u.newVersion,O(c.transaction),u)}),n&&c.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),o&&u.addEventListener("versionchange",_=>o(_.oldVersion,_.newVersion,_))}).catch(()=>{}),l}const It=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],re=new Map;function Fe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(re.get(t))return re.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=Dt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||It.includes(n)))return;const s=async function(c,...l){const u=this.transaction(c,o?"readwrite":"readonly");let _=u.store;return r&&(_=_.index(l.shift())),(await Promise.all([_[n](...l),o&&u.done]))[0]};return re.set(t,s),s}et(e=>({...e,get:(t,n,r)=>Fe(t,n)||e.get(t,n,r),has:(t,n)=>!!Fe(t,n)||e.has(t,n)}));const St=["continue","continuePrimaryKey","advance"],Me={},pe=new WeakMap,tt=new WeakMap,Ct={get(e,t){if(!St.includes(t))return e[t];let n=Me[t];return n||(n=Me[t]=function(...r){pe.set(this,tt.get(this)[t](...r))}),n}};async function*Pt(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const n=new Proxy(t,Ct);for(tt.set(n,t),te.set(n,fe(t));t;)yield n,t=await(pe.get(n)||t.continue()),pe.delete(n)}function Oe(e,t){return t===Symbol.asyncIterator&&le(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&le(e,[IDBIndex,IDBObjectStore])}et(e=>({...e,get(t,n,r){return Oe(t,n)?Pt:e.get(t,n,r)},has(t,n){return Oe(t,n)||e.has(t,n)}}));const Et="room-assets-db",Tt=1;async function B(){return kt(Et,Tt,{upgrade(e){e.objectStoreNames.contains("rooms")||e.createObjectStore("rooms",{keyPath:"id"}),e.objectStoreNames.contains("assets")||e.createObjectStore("assets",{keyPath:"id"}),e.objectStoreNames.contains("bookings")||e.createObjectStore("bookings",{keyPath:"id"})}})}async function be(){return(await B()).getAll("rooms")}async function we(){return(await B()).getAll("assets")}async function At(){return(await B()).getAll("bookings")}async function Lt(e){const t=await B();if((await t.getAll("bookings")).find(o=>o.resourceType===e.resourceType&&o.resourceId===e.resourceId&&!(e.end<=o.start||e.start>=o.end)))throw new Error("Пересечение с другой бронью!");await t.put("bookings",e)}async function xt(e){await(await B()).put("bookings",e)}async function Nt(e){await(await B()).delete("bookings",e)}async function $t(e){const n=(await B()).transaction(["rooms","assets","bookings"],"readwrite");await Promise.all([n.objectStore("rooms").clear(),n.objectStore("assets").clear(),n.objectStore("bookings").clear()]),e.rooms.forEach(r=>n.objectStore("rooms").put(r)),e.assets.forEach(r=>n.objectStore("assets").put(r)),e.bookings.forEach(r=>n.objectStore("bookings").put(r)),await n.done}async function Bt(){const e=await B(),t=await e.getAll("rooms"),n=await e.getAll("assets"),r=await e.getAll("bookings");return{rooms:t,assets:n,bookings:r}}async function nt(e){if(!e||!Array.isArray(e.rooms)||!Array.isArray(e.assets)||!Array.isArray(e.bookings))throw new Error("Неверный формат JSON: ожидаются поля rooms[], assets[], bookings[]");const t=e.bookings.map(n=>({...n,resourceType:n.resourceType==="room"?"room":"asset"}));await $t({rooms:e.rooms,assets:e.assets,bookings:t})}function jt({existing:e,onSave:t}){const[n,r]=k([]),[o,s]=k([]),[c,l]=k(e?.resourceType||"room"),[u,_]=k(e?.resourceId||""),[p,i]=k(e?.title||""),[h,d]=k(e?.notes||""),[b,S]=k(e?.start?e.start.slice(0,16):""),[w,y]=k(e?.end?e.end.slice(0,16):"");return ee(()=>{(async()=>(r(await be()),s(await we())))()},[]),a("div",{class:"form-card",children:[a("h3",{children:e?"Редактировать бронь":"Новая бронь"}),a("form",{onSubmit:async m=>{if(m.preventDefault(),!u||!p||!b||!w){alert("Заполните все обязательные поля!");return}const C={id:e?.id||crypto.randomUUID(),resourceType:c,resourceId:u,title:p,start:new Date(b).toISOString(),end:new Date(w).toISOString(),notes:h};try{e?await xt(C):await Lt(C),t()}catch(T){alert(`Не удалось сохранить бронь: ${T.message}`)}},class:"form-grid",children:[a("label",{children:["Тип ресурса",a("select",{value:c,onChange:m=>l(m.target.value),children:[a("option",{value:"room",children:"Аудитория"}),a("option",{value:"asset",children:"Инвентарь"})]})]}),a("label",{children:["Ресурс",a("select",{value:u,onChange:m=>_(m.target.value),children:[a("option",{value:"",children:"-- выберите --"}),c==="room"&&n.map(m=>a("option",{value:m.id,children:m.name},m.id)),c==="asset"&&o.map(m=>a("option",{value:m.id,children:m.name},m.id))]})]}),a("label",{children:["Название события",a("input",{type:"text",value:p,onInput:m=>i(m.target.value)})]}),a("label",{children:["Начало",a("input",{type:"datetime-local",value:b,onInput:m=>S(m.target.value)})]}),a("label",{children:["Конец",a("input",{type:"datetime-local",value:w,onInput:m=>y(m.target.value)})]}),a("label",{children:["Примечание",a("textarea",{value:h,onInput:m=>d(m.target.value)})]}),a("div",{class:"form-buttons",children:[a("button",{type:"submit",children:"Сохранить"}),a("button",{type:"button",onClick:t,children:"Отмена"})]})]})]})}async function Ft(){const e=await Bt(),t=JSON.stringify(e,null,2),n=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(n),o=document.createElement("a");o.href=r,o.download="roomassets_export.json",o.click(),URL.revokeObjectURL(r)}async function Mt(e){const t=await e.text(),n=JSON.parse(t);await nt(n)}function Ot(){const[e,t]=k([]),[n,r]=k(null),[o,s]=k(!1),[c,l]=k([]),[u,_]=k([]),p=dt(null),[i,h]=k(""),[d,b]=k(""),[S,w]=k(""),[y,v]=k(""),[m,C]=k(""),[T,L]=k("all"),j=async()=>{const f=await At();t(f)},H=async f=>{confirm("Удалить эту бронь?")&&(await Nt(f),j())},F=f=>f.resourceType==="room"?c.find(E=>E.id===f.resourceId)?.name||f.resourceId:u.find(E=>E.id===f.resourceId)?.name||f.resourceId,U=async()=>{await Ft()},P=()=>{p.current?.click()},x=async f=>{const E=f.target,N=E.files&&E.files[0];if(N)try{await Mt(N),await j(),alert("Импорт выполнен")}catch($){alert(`Ошибка импорта: ${$.message||$}`)}finally{E.value=""}};ee(()=>{(async()=>(l(await be()),_(await we()),j()))()},[]);const ke=e.filter(f=>{const E=new Date,N=new Date(f.end)<E;if(T==="active"&&N||T==="finished"&&!N)return!1;const $=i.toLowerCase();return!($&&!f.title.toLowerCase().includes($)&&!f.notes?.toLowerCase().includes($)||d&&f.resourceType!==d||S&&f.resourceId!==S||y&&new Date(f.start)<new Date(y)||m&&new Date(f.end)>new Date(m))});return a("div",{class:"container",children:[a("h2",{children:"Брони"}),a("div",{class:"actions",children:[!o&&!n&&a("button",{class:"add-button",onClick:()=>s(!0),children:"+ Добавить бронь"}),a("button",{onClick:U,children:"Экспорт JSON"}),a("button",{onClick:P,children:"Импорт JSON"}),a("input",{ref:p,type:"file",accept:"application/json,.json",style:{display:"none"},onChange:x})]}),a("div",{class:"filters",children:[a("input",{type:"text",placeholder:"Поиск по названию или примечанию...",value:i,onInput:f=>h(f.target.value)}),a("select",{value:d,onChange:f=>b(f.target.value),children:[a("option",{value:"",children:"Тип ресурса: все"}),a("option",{value:"room",children:"Аудитории"}),a("option",{value:"asset",children:"Инвентарь"})]}),a("select",{value:S,onChange:f=>w(f.target.value),children:[a("option",{value:"",children:"Конкретный ресурс: все"}),(d===""||d==="room")&&c.map(f=>a("option",{value:f.id,children:f.name},f.id)),(d===""||d==="asset")&&u.map(f=>a("option",{value:f.id,children:f.name},f.id))]}),a("select",{value:T,onChange:f=>L(f.target.value),children:[a("option",{value:"all",children:"Статус: все"}),a("option",{value:"active",children:"Активные"}),a("option",{value:"finished",children:"Завершённые"})]}),a("input",{type:"date",value:y,onInput:f=>v(f.target.value)}),a("input",{type:"date",value:m,onInput:f=>C(f.target.value)}),a("button",{onClick:()=>{h(""),b(""),w(""),L("all"),v(""),C("")},children:"Сбросить"})]}),(o||n)&&a(jt,{existing:n||void 0,onSave:()=>{s(!1),r(null),j()}}),ke.length===0&&a("p",{children:"Нет броней"}),a("div",{class:"bookings-list",children:ke.map(f=>{const E=new Date,N=new Date(f.end)<E,$=N?"Завершена":"Активна";return a("div",{class:"card",children:[a("h3",{children:f.title}),a("p",{children:[f.resourceType==="room"?"Аудитория":"Инвентарь"," –"," ",F(f)]}),a("p",{children:[new Date(f.start).toLocaleString()," —"," ",new Date(f.end).toLocaleString()]}),a("p",{children:[a("b",{children:"Статус:"})," ",a("span",{class:`status ${N?"finished":"active"}`,children:$})]}),f.notes&&a("p",{children:a("i",{children:f.notes})}),a("div",{class:"card-buttons",children:[a("button",{onClick:()=>r(f),children:"Редактировать"}),a("button",{onClick:()=>H(f.id),children:"Удалить"})]})]},f.id)})})]})}function Ht(){const[e,t]=k([]),[n,r]=k([]);return ee(()=>{(async()=>(t(await be()),r(await we())))()},[]),a("div",{class:"container",children:[a("h2",{children:"Аудитории"}),e.map(o=>a("div",{class:"card",children:[a("h3",{children:o.name}),a("p",{children:["Вместимость: ",o.capacity]}),a("p",{children:["Особенности: ",o.features.join(", ")||"нет"]})]},o.id)),a("h2",{children:"Инвентарь"}),n.map(o=>a("div",{class:"card",children:[a("h3",{children:o.name}),a("p",{children:["Код/серийный номер: ",o.inventoryCode]}),a("p",{children:["Статус: ",o.status]})]},o.id))]})}const Rt=[{id:"r-101",name:"Аудитория 101",capacity:30,features:["Проектор","Белая доска"]},{id:"r-203",name:"Аудитория 203",capacity:20,features:[]}],Ut=[{id:"a-proj-1",name:"Проектор Epson",inventoryCode:"PRJ001",status:"Доступно"},{id:"a-laptop-1",name:"Ноутбук Dell",inventoryCode:"LTP001",status:"Доступно"}],Wt=[{id:"b-1",resourceType:"room",resourceId:"r-101",title:"Семинар",start:"2025-09-05T08:00:00Z",end:"2025-09-05T09:30:00Z",notes:"Нужен HDMI"}],se={rooms:Rt,assets:Ut,bookings:Wt},Vt={rooms:se.rooms||[],assets:se.assets||[],bookings:(se.bookings||[]).map(e=>({...e,resourceType:e.resourceType==="room"?"room":"asset"}))},Jt=()=>{const[e,t]=k("bookings");return ee(()=>{(async()=>{try{await nt(Vt)}catch(n){console.error("Ошибка загрузки seed:",n)}})()},[]),a("div",{children:[a("nav",{style:{display:"flex",gap:"1rem",padding:"1rem"},children:[a("button",{onClick:()=>t("bookings"),children:"Брони"}),a("button",{onClick:()=>t("resources"),children:"Каталог ресурсов"})]}),e==="bookings"?a(Ot,{}):a(Ht,{})]})};at(a(Jt,{}),document.getElementById("app"));
